!function(e,t){for(var r in t)e[r]=t[r]}(this,function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,t,r){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=2)}([function(e,t,r){"use strict";var i=r(1),a=function(){function e(e,t){this.root=e,this.delegate=t,this.idMap={}}return e.prototype.initialize=function(e,t){this.idMap[e]=this.root;for(var r=0;r<t.length;r++)this.deserializeNode(t[r],this.root)},e.prototype.applyChanged=function(e,t,r,i){var a=this;t.forEach(function(e){var t=a.deserializeNode(e);a.deserializeNode(e.parentNode),a.deserializeNode(e.previousSibling);t.parentNode&&t.parentNode.removeChild(t)}),e.forEach(function(e){var t=a.deserializeNode(e);t.parentNode&&t.parentNode.removeChild(t)}),t.forEach(function(e){var t=a.deserializeNode(e),r=a.deserializeNode(e.parentNode),i=a.deserializeNode(e.previousSibling);r.insertBefore(t,i?i.nextSibling:r.firstChild)}),r.forEach(function(e){var t=a.deserializeNode(e);Object.keys(e.attributes).forEach(function(r){var i=e.attributes[r];null===i?t.removeAttribute(r):a.delegate&&a.delegate.setAttribute&&a.delegate.setAttribute(t,r,i)||t.setAttribute(r,i)})}),i.forEach(function(e){var t=a.deserializeNode(e);t.textContent=e.textContent}),e.forEach(function(e){delete a.idMap[e.id]})},e.prototype.deserializeNode=function(e,t){var r=this;if(null===e)return null;var i=this.idMap[e.id];if(i)return i;var a=this.root.ownerDocument;switch(null===a&&(a=this.root),e.nodeType){case Node.COMMENT_NODE:i=a.createComment(e.textContent);break;case Node.TEXT_NODE:i=a.createTextNode(e.textContent);break;case Node.DOCUMENT_TYPE_NODE:i=a.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case Node.ELEMENT_NODE:this.delegate&&this.delegate.createElement&&(i=this.delegate.createElement(e.tagName)),i||(i=a.createElement(e.tagName)),Object.keys(e.attributes).forEach(function(t){try{r.delegate&&r.delegate.setAttribute&&r.delegate.setAttribute(i,t,e.attributes[t])||i.setAttribute(t,e.attributes[t])}catch(e){}})}if(!i)throw"ouch";if(this.idMap[e.id]=i,t&&t.appendChild(i),e.childNodes)for(var n=0;n<e.childNodes.length;n++)this.deserializeNode(e.childNodes[n],i);return i},e}(),n=function(){function e(e,t,r){var a=this;this.target=e,this.mirror=t,this.nextId=1,this.knownNodes=new i.MutationSummary.NodeMap,"undefined"==typeof this.mirror&&(this.mirror=a.getDefaultMirror());for(var n=this.serializeNode(e).id,o=[],s=e.firstChild;s;s=s.nextSibling)o.push(this.serializeNode(s,!0));this.mirror.initialize(n,o);var h=[{all:!0}];r&&(h=h.concat(r));var u;try{u="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver}catch(e){u=void 0}void 0!==u&&(this.mutationSummary=new i.MutationSummary({rootNode:e,callback:function(e){a.applyChanged(e)},queries:h}))}return e.prototype.getDefaultMirror=function(){return{initialize:function(e,t){},applyChanged:function(e,t,r,i){}}},e.prototype.disconnect=function(){this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0)},e.prototype.rememberNode=function(e){var t=this.nextId++;return this.knownNodes.set(e,t),t},e.prototype.forgetNode=function(e){this.knownNodes.delete(e)},e.prototype.serializeNode=function(e,t){if(null===e)return null;var r=this.knownNodes.get(e);if(void 0!==r)return{id:r};var i={nodeType:e.nodeType,id:this.rememberNode(e)};switch(i.nodeType){case Node.DOCUMENT_TYPE_NODE:var a=e;i.name=a.name,i.publicId=a.publicId,i.systemId=a.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:i.textContent=e.textContent;break;case Node.ELEMENT_NODE:var n=e;i.tagName=n.tagName,i.attributes={};for(var o=0;o<n.attributes.length;o++){var s=n.attributes[o];i.attributes[s.name]=s.value}if(t&&n.childNodes.length){i.childNodes=[];for(var h=n.firstChild;h;h=h.nextSibling)i.childNodes.push(this.serializeNode(h,!0))}}return i},e.prototype.serializeAddedAndMoved=function(e,t,r){var a=this,n=e.concat(t).concat(r),o=new i.MutationSummary.NodeMap;n.forEach(function(e){var t=e.parentNode,r=o.get(t);r||(r=new i.MutationSummary.NodeMap,o.set(t,r)),r.set(e,!0)});var s=[];return o.keys().forEach(function(e){for(var t=o.get(e),r=t.keys();r.length;){for(var i=r[0];i.previousSibling&&t.has(i.previousSibling);)i=i.previousSibling;for(;i&&t.has(i);){var n=a.serializeNode(i);n.previousSibling=a.serializeNode(i.previousSibling),n.parentNode=a.serializeNode(i.parentNode),s.push(n),t.delete(i),i=i.nextSibling}var r=t.keys()}}),s},e.prototype.serializeAttributeChanges=function(e){var t=this,r=new i.MutationSummary.NodeMap;return Object.keys(e).forEach(function(i){e[i].forEach(function(e){var a=r.get(e);a||(a=t.serializeNode(e),a.attributes={},r.set(e,a)),a.attributes[i]=e.getAttribute(i)})}),r.keys().map(function(e){return r.get(e)})},e.prototype.applyChanged=function(e){var t=this,r=e[0],i=r.removed.map(function(e){return t.serializeNode(e)}),a=this.serializeAddedAndMoved(r.added,r.reparented,r.reordered),n=this.serializeAttributeChanges(r.attributeChanged),o=r.characterDataChanged.map(function(e){var r=t.serializeNode(e);return r.textContent=e.textContent,r});this.mirror.applyChanged(i,a,n,o),r.removed.forEach(function(e){t.forgetNode(e)})},e}();e.exports={TreeMirror:a,TreeMirrorClient:n}},function(e,t){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){this.added=new m,this.removed=new m,this.maybeMoved=new m,this.oldPrevious=new m,this.moved=void 0}function o(e,t,r,i,a){this.rootNode=e,this.mutations=t,this.selectors=r,this.calcReordered=i,this.calcOldPreviousSibling=a,this.treeChanges=new N(e,t),this.entered=[],this.exited=[],this.stayedIn=new m,this.visited=new m,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}function s(e,t){var r=this;if(this.projection=e,this.added=[],this.removed=[],this.reparented=t.all||t.element?[]:void 0,this.reordered=t.all?[]:void 0,e.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var i=t.attribute?[t.attribute]:t.attributeList,a=e.attributeChangedNodes(i);t.attribute?this.valueChanged=a[t.attribute]||[]:(this.attributeChanged=a,t.attributeList&&t.attributeList.forEach(function(e){r.attributeChanged.hasOwnProperty(e)||(r.attributeChanged[e]=[])}))}if(t.all||t.characterData){var n=e.getCharacterDataChanged();t.characterData?this.valueChanged=n:this.characterDataChanged=n}this.reordered&&(this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e))}function h(e){return'"'+e.replace(/"/,'\\"')+'"'}function u(){}function d(){this.nextUid=1,this.uid=this.nextUid++,this.qualifiers=[]}function c(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(e=e.trim(),!e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(E))throw Error("Invalid request option. invalid attribute name: "+e);return e}function l(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var t={},r={},i=e.split(/\s+/),a=0;a<i.length;a++){var n=i[a];if(n){var n=c(n),o=n.toLowerCase();if(t[o])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");r[n]=!0,t[o]=!0}}return Object.keys(r)}function f(e){var t={};return e.forEach(function(e){e.qualifiers.forEach(function(e){t[e.attrName]=!0})}),Object.keys(t)}function v(e){var t=this;this.connected=!1,this.options=this.validateOptions(e),this.observerOptions=this.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(e){return e.all}),this.queryValidators=[],this.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(e){return this.createQueryValidator(t.root,e)})),this.observer=new g(function(e){t.observerCallback(e)}),this.reconnect()}var g,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();try{g="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver}catch(e){g=void 0}var b,m=function(){function e(){a(this,e),this.nodes=[],this.values=[],this.ID_PROP="__mutation_summary_node_map_id__",this.nextId_=1}return p(e,[{key:"isIndex",value:function(e){return+e===e>>>0}},{key:"nodeId",value:function(e){var t=e[this.ID_PROP];return t||(t=e[this.ID_PROP]=this.nextId_++),t}},{key:"set",value:function(e,t){var r=this.nodeId(e);this.nodes[r]=e,this.values[r]=t}},{key:"get",value:function(e){var t=this.nodeId(e);return this.values[t]}},{key:"has",value:function(e){return this.nodeId(e)in this.nodes}},{key:"delete",value:function(e){var t=this.nodeId(e);delete this.nodes[t],this.values[t]=void 0}},{key:"keys",value:function(){var e=[];for(var t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e}}]),e}();!function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(b||(b={}));var y=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;a(this,e),this.node=t,this.childList=r,this.attributes=i,this.characterData=n,this.oldParentNode=o,this.added=s,this.attributeOldValues=h,this.characterDataOldValue=u,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return p(e,[{key:"getAttributeOldValue",value:function(e){if(this.attributeOldValues)return this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]}},{key:"getAttributeNamesMutated",value:function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues)e.push(t);return e}},{key:"attributeMutated",value:function(e,t){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},e in this.attributeOldValues||(this.attributeOldValues[e]=t)}},{key:"characterDataMutated",value:function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)}},{key:"removedFromParent",value:function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e}},{key:"insertedIntoParent",value:function(){this.childList=!0,this.added=!0}},{key:"getOldParent",value:function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode}}]),e}(),N=function(e){function t(e,i){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.rootNode=e,n.reachableCache=void 0,n.wasReachableCache=void 0,n.anyParentsChanged=!1,n.anyAttributesChanged=!1,n.anyCharacterDataChanged=!1;for(var o=0;o<i.length;o++){var s=i[o];switch(s.type){case"childList":n.anyParentsChanged=!0;for(var h=0;h<s.removedNodes.length;h++){var u=s.removedNodes[h];n.getChange(u).removedFromParent(s.target)}for(var h=0;h<s.addedNodes.length;h++){var u=s.addedNodes[h];n.getChange(u).insertedIntoParent()}break;case"attributes":n.anyAttributesChanged=!0;var d=n.getChange(s.target);d.attributeMutated(s.attributeName,s.oldValue);break;case"characterData":n.anyCharacterDataChanged=!0;var d=n.getChange(s.target);d.characterDataMutated(s.oldValue)}}return n}return i(t,e),p(t,[{key:"getChange",value:function(e){var t=this.get(e);return t||(t=new y(e),this.set(e,t)),t}},{key:"getOldParent",value:function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode}},{key:"getIsReachable",value:function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new m;var t=this.reachableCache.get(e);return void 0===t&&(t=this.getIsReachable(e.parentNode),this.reachableCache.set(e,t)),t}},{key:"getWasReachable",value:function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new m;var t=this.wasReachableCache.get(e);return void 0===t&&(t=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,t)),t}},{key:"reachabilityChange",value:function(e){return this.getIsReachable(e)?this.getWasReachable(e)?2:1:this.getWasReachable(e)?5:0}}]),t}(m);o.prototype.processMutations=function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),t=0;t<e.length;t++)this.visitNode(e[t],void 0)},o.prototype.visitNode=function(e,t){if(!this.visited.has(e)){this.visited.set(e,!0);var r=this.treeChanges.get(e),i=t;if((r&&r.childList||void 0==i)&&(i=this.treeChanges.reachabilityChange(e)),0!==i){if(this.matchabilityChange(e),1===i)this.entered.push(e);else if(5===i)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(2===i){var a=2;r&&r.childList&&(r.oldParentNode!==e.parentNode?(a=3,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(a=4)),this.stayedIn.set(e,a)}if(2!==i)for(var n=e.firstChild;n;n=n.nextSibling)this.visitNode(n,i)}}},o.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var i=this.childListChangeMap.get(t);i||(i=new n,this.childListChangeMap.set(t,i)),i.oldPrevious.has(e)||i.oldPrevious.set(e,e.previousSibling)}},o.prototype.getChanged=function(e,t,r){this.selectors=t,this.characterDataOnly=r;for(var i=0;i<this.entered.length;i++){var a=this.entered[i],n=this.matchabilityChange(a);1!==n&&2!==n||e.added.push(a)}for(var o=this.stayedIn.keys(),i=0;i<o.length;i++){var a=o[i],n=this.matchabilityChange(a);if(1===n)e.added.push(a);else if(5===n)e.removed.push(a);else if(2===n&&(e.reparented||e.reordered)){var s=this.stayedIn.get(a);e.reparented&&3===s?e.reparented.push(a):e.reordered&&4===s&&e.reordered.push(a)}}for(var i=0;i<this.exited.length;i++){var a=this.exited[i],n=this.matchabilityChange(a);5!==n&&2!==n||e.removed.push(a)}},o.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var r=this.treeChanges.reachabilityChange(e);if(0===r||1===r)throw Error("getOldParentNode requested on invalid node.");return e.parentNode},o.prototype.getOldPreviousSibling=function(e){var t=e.parentNode,r=this.treeChanges.get(e);r&&r.oldParentNode&&(t=r.oldParentNode);var i=this.childListChangeMap.get(t);if(!i)throw Error("getOldPreviousSibling requested on invalid node.");return i.oldPrevious.get(e)},o.prototype.getOldAttribute=function(e,t){var r=this.treeChanges.get(e);if(!r||!r.attributes)throw Error("getOldAttribute requested on invalid node.");var i=r.getAttributeOldValue(t);if(void 0===i)throw Error("getOldAttribute requested for unchanged attribute name.");return i},o.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t,r;if(e){t={},r={};for(var i=0;i<e.length;i++){var a=e[i];t[a]=!0,r[a.toLowerCase()]=a}}for(var n={},o=this.treeChanges.keys(),i=0;i<o.length;i++){var s=o[i],h=this.treeChanges.get(s);if(h.attributes&&2===this.treeChanges.reachabilityChange(s)&&2===this.matchabilityChange(s))for(var u=s,d=h.getAttributeNamesMutated(),c=0;c<d.length;c++){var a=d[c];if(!t||t[a]||h.isCaseInsensitive&&r[a]){var l=h.getAttributeOldValue(a);l!==u.getAttribute(a)&&(r&&h.isCaseInsensitive&&(a=r[a]),n[a]=n[a]||[],n[a].push(u))}}}return n},o.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue},o.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),t=[],r=0;r<e.length;r++){var i=e[r];if(2===this.treeChanges.reachabilityChange(i)){var a=this.treeChanges.get(i);a.characterData&&i.textContent!=a.characterDataOldValue&&t.push(i)}}return t},o.prototype.computeMatchabilityChange=function(e,t){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new m);var r=this.matchCache[e.uid],i=r.get(t);return void 0===i&&(i=e.matchabilityChange(t,this.treeChanges.get(t)),r.set(t,i)),i},o.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return 2;default:return 0}if(!this.selectors)return 2;if(e.nodeType!==Node.ELEMENT_NODE)return 0;for(var r=e,i=this.selectors.map(function(e){return t.computeMatchabilityChange(e,r)}),a=0,n=0;2!==a&&n<i.length;){switch(i[n]){case 2:a=2;break;case 1:a=5===a?2:1;break;case 5:a=1===a?2:5}n++}return a},o.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);return t||(t=new n,this.childListChangeMap.set(e,t)),t},o.prototype.processChildlistChanges=function(){var e=this;if(!this.childListChangeMap){this.childListChangeMap=new m;for(var t=function(){function t(e,t){!e||a.oldPrevious.has(e)||a.added.has(e)||a.maybeMoved.has(e)||t&&(a.added.has(t)||a.maybeMoved.has(t))||a.oldPrevious.set(e,t)}if(i=e.mutations[r],"childList"!=i.type)return"continue";if(2!==e.treeChanges.reachabilityChange(i.target)&&!e.calcOldPreviousSibling)return"continue";for(a=e.getChildlistChange(i.target),n=i.previousSibling,o=0;o<i.removedNodes.length;o++)s=i.removedNodes[o],t(s,n),a.added.has(s)?a.added.delete(s):(a.removed.set(s,!0),a.maybeMoved.delete(s)),n=s;for(t(i.nextSibling,n),o=0;o<i.addedNodes.length;o++)s=i.addedNodes[o],a.removed.has(s)?(a.removed.delete(s),a.maybeMoved.set(s,!0)):a.added.set(s,!0)},r=0;r<this.mutations.length;r++){var i,a,n,o,s,o,s;t()}}},o.prototype.wasReordered=function(e){function t(e){if(!e)return!1;if(!o.maybeMoved.has(e))return!1;var t=o.moved.get(e);return void 0!==t?t:(s.has(e)?t=!0:(s.set(e,!0),t=i(e)!==r(e)),s.has(e)?(s.delete(e),o.moved.set(e,t)):t=o.moved.get(e),t)}function r(e){var i=h.get(e);if(void 0!==i)return i;for(i=o.oldPrevious.get(e);i&&(o.removed.has(i)||t(i));)i=r(i);return void 0===i&&(i=e.previousSibling),h.set(e,i),i}function i(e){if(u.has(e))return u.get(e);for(var r=e.previousSibling;r&&(o.added.has(r)||t(r));)r=r.previousSibling;return u.set(e,r),r}if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var a=e.parentNode,n=this.treeChanges.get(e);n&&n.oldParentNode&&(a=n.oldParentNode);var o=this.childListChangeMap.get(a);if(!o)return!1;if(o.moved)return o.moved.get(e);o.moved=new m;var s=new m,h=new m,u=new m;return o.maybeMoved.keys().forEach(t),o.moved.get(e)},s.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)},s.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)},s.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)},s.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)};var C=/[a-zA-Z_]+/,k=/[a-zA-Z0-9_\-]+/;u.prototype.matches=function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var t=e.split(" "),r=0;r<t.length;r++)if(this.attrValue===t[r])return!0;return!1},u.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+h(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+h(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},Object.defineProperty(d.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),d.prototype.isMatching=function(e){return e[this.matchesSelector](this.selectorString)},d.prototype.wasMatching=function(e,t,r){if(!t||!t.attributes)return r;var i=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==i&&i!==e.tagName)return!1;for(var a=[],n=!1,o=0;o<this.qualifiers.length;o++){var s=this.qualifiers[o],h=t.getAttributeOldValue(s.attrName);a.push(h),n=n||void 0!==h}if(!n)return r;for(var o=0;o<this.qualifiers.length;o++){var s=this.qualifiers[o],h=a[o];if(void 0===h&&(h=e.getAttribute(s.attrName)),!s.matches(h))return!1}return!0},d.prototype.matchabilityChange=function(e,t){var r=this.isMatching(e);return r?this.wasMatching(e,t,r)?2:1:this.wasMatching(e,t,r)?5:0},d.parseSelectors=function(e){function t(){i&&(a&&(i.qualifiers.push(a),a=void 0),o.push(i)),i=new d}function r(){a&&i.qualifiers.push(a),a=new u}for(var i,a,n,o=[],s=/\s/,h="Invalid or unsupported selector syntax.",c=1,l=2,f=3,v=4,g=5,p=6,b=7,m=8,y=9,N=10,E=11,O=12,w=13,M=14,D=c,P=0;P<e.length;){var S=e[P++];switch(D){case c:if(S.match(C)){t(),i.tagName=S,D=l;break}if("*"==S){t(),i.tagName="*",D=f;break}if("."==S){t(),r(),i.tagName="*",a.attrName="class",a.contains=!0,D=v;break}if("#"==S){t(),r(),i.tagName="*",a.attrName="id",D=v;break}if("["==S){t(),r(),i.tagName="*",a.attrName="",D=p;break}if(S.match(s))break;throw Error(h);case l:if(S.match(k)){i.tagName+=S;break}if("."==S){r(),a.attrName="class",a.contains=!0,D=v;break}if("#"==S){r(),a.attrName="id",D=v;break}if("["==S){r(),a.attrName="",D=p;break}if(S.match(s)){D=M;break}if(","==S){D=c;break}throw Error(h);case f:if("."==S){r(),a.attrName="class",a.contains=!0,D=v;break}if("#"==S){r(),a.attrName="id",D=v;break}if("["==S){r(),a.attrName="",D=p;break}if(S.match(s)){D=M;break}if(","==S){D=c;break}throw Error(h);case v:if(S.match(C)){a.attrValue=S,D=g;break}throw Error(h);case g:if(S.match(k)){a.attrValue+=S;break}if("."==S){r(),a.attrName="class",a.contains=!0,D=v;break}if("#"==S){r(),a.attrName="id",D=v;break}if("["==S){r(),D=p;break}if(S.match(s)){D=M;break}if(","==S){D=c;break}throw Error(h);case p:if(S.match(C)){a.attrName=S,D=b;break}if(S.match(s))break;throw Error(h);case b:if(S.match(k)){a.attrName+=S;break}if(S.match(s)){D=m;break}if("~"==S){a.contains=!0,D=y;break}if("="==S){a.attrValue="",D=E;break}if("]"==S){D=f;break}throw Error(h);case m:if("~"==S){a.contains=!0,D=y;break}if("="==S){a.attrValue="",D=E;break}if("]"==S){D=f;break}if(S.match(s))break;throw Error(h);case y:if("="==S){a.attrValue="",D=E;break}throw Error(h);case N:if("]"==S){D=f;break}if(S.match(s))break;throw Error(h);case E:if(S.match(s))break;if('"'==S||"'"==S){n=S,D=w;break}a.attrValue+=S,D=O;break;case O:if(S.match(s)){D=N;break}if("]"==S){D=f;break}if("'"==S||'"'==S)throw Error(h);a.attrValue+=S;break;case w:if(S==n){D=N;break}a.attrValue+=S;break;case M:if(S.match(s))break;if(","==S){D=c;break}throw Error(h)}}switch(D){case c:case l:case f:case g:case M:t();break;default:throw Error(h)}if(!o.length)throw Error(h);return o},d.matchesSelector=function(){var e=document.createElement("div");return"function"==typeof e.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof e.mozMatchesSelector?"mozMatchesSelector":"function"==typeof e.msMatchesSelector?"msMatchesSelector":"matchesSelector"};var E=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;v.prototype.createObserverOptions=function(e){function t(e){if(!i.attributes||r){if(i.attributes=!0,i.attributeOldValue=!0,!e)return void(r=void 0);r=r||{},e.forEach(function(e){r[e]=!0,r[e.toLowerCase()]=!0})}}var r,i={childList:!0,subtree:!0};return e.forEach(function(e){if(e.characterData)return i.characterData=!0,void(i.characterDataOldValue=!0);if(e.all)return t(),i.characterData=!0,void(i.characterDataOldValue=!0);if(e.attribute)return void t([e.attribute.trim()]);var r=f(e.elementFilter).concat(e.attributeList||[]);r.length&&t(r)}),r&&(i.attributeFilter=Object.keys(r)),i},v.prototype.validateOptions=function(e){for(var t in e)if(!(t in v.optionKeys))throw Error("Invalid option: "+t);if("function"!=typeof e.callback)throw Error("Invalid options: callback is required and must be a function");if(!e.queries||!e.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var r={callback:e.callback,rootNode:e.rootNode||document,observeOwnChanges:!!e.observeOwnChanges,oldPreviousSibling:!!e.oldPreviousSibling,queries:[]},i=0;i<e.queries.length;i++){var a=e.queries[i];if(a.all){if(Object.keys(a).length>1)throw Error("Invalid request option. all has no options.");r.queries.push({all:!0})}else if("attribute"in a){var n={attribute:c(a.attribute)};if(n.elementFilter=d.parseSelectors("*["+n.attribute+"]"),Object.keys(a).length>1)throw Error("Invalid request option. attribute has no options.");r.queries.push(n)}else if("element"in a){var o=Object.keys(a).length,n={element:a.element,elementFilter:d.parseSelectors(a.element)};if(a.hasOwnProperty("elementAttributes")&&(n.attributeList=l(a.elementAttributes),o--),o>1)throw Error("Invalid request option. element only allows elementAttributes option.");r.queries.push(n)}else{if(!a.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(a).length>1)throw Error("Invalid request option. characterData has no options.");r.queries.push({characterData:!0})}}return r},v.prototype.createSummaries=function(e){if(!e||!e.length)return[];for(var t=new o(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),r=[],i=0;i<this.options.queries.length;i++)r.push(new s(t,this.options.queries[i]));return r},v.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(e){e&&e.recordPreviousState()})},v.prototype.runQueryValidators=function(e){this.queryValidators.forEach(function(t,r){t&&t.validate(e[r])})},v.prototype.changesToReport=function(e){return e.some(function(e){var t=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(t.some(function(t){return e[t]&&e[t].length}))return!0;if(e.attributeChanged){var r=Object.keys(e.attributeChanged),i=r.some(function(t){return!!e.attributeChanged[t].length});if(i)return!0}return!1})},v.prototype.observerCallback=function(e){this.options.observeOwnChanges||this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(t)&&this.callback(t),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},v.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},v.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0},v.prototype.disconnect=function(){var e=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,e},v.NodeMap=m,v.parseElementFilter=d.parseSelectors,v.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},e.exports={MutationSummary:v}},function(e,t,r){"use strict";var i=r(0);(function(){if("undefined"!=typeof e&&e.exports)var t=e.exports={TreeMirror:i.TreeMirror,TreeMirrorClient:i.TreeMirrorClient};t.TreeMirror=i.TreeMirror,t.TreeMirrorClient=i.TreeMirrorClient}).call(void 0)}]));